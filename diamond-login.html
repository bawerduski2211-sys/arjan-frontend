<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARJAN AI | Diamond System</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        /* --- Ù¡. Ø³ØªØ§ÛŒÙ„Û ØªÛ• ÛŒÛ Ø²ÛÚ•ÛŒÙ† (CSS) Ù„ Ú¤ÛØ±Û• Ø¬ÛÚ¯ÛŒØ± Ú©Ø± --- */
        :root {
            --gold: #D4AF37;
            --gold-gradient: linear-gradient(45deg, #000, #D4AF37, #000);
            --white: #ffffff;
        }

        body {
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: sans-serif;
        }

        .auth-container { width: 100%; max-width: 400px; padding: 20px; }

        .auth-card {
            background: var(--white);
            padding: 40px 30px;
            border-radius: 30px;
            border: 2px solid var(--gold);
            text-align: center;
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .hidden { display: none !important; } /* Ø¦Û•Ú¤Û• ÙÛ†Ø±Ù…Ø§Ù† Ø¯Ú¤Û•Ø´ÛØ±ÛŒØª */

        input {
            width: 100%;
            padding: 15px;
            border-radius: 12px;
            border: 1px solid #ddd;
            outline: none;
            box-sizing: border-box;
            text-align: center;
        }

        .btn-diamond {
            width: 100%;
            padding: 15px;
            background: var(--gold-gradient);
            background-size: 200% auto;
            color: #fff;
            border: 2px solid var(--gold);
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.5s;
        }

        .btn-diamond:hover { background-position: right center; }

        /* Ø³ØªØ§ÛŒÙ„Û Ø¯Û†Ú©Ù…Ø§ "Ø¯Ø±ÙˆØ³Øª Ø¨Ú©Û•" */
        .btn-link {
            background: none;
            border: none;
            color: var(--gold);
            cursor: pointer;
            font-weight: bold;
            text-decoration: underline;
            font-size: 14px;
        }
    </style>
</head>
<body>

    <div class="auth-container">
        <div id="login-form" class="auth-card">
            <div style="font-size: 50px;">ğŸ’</div>
            <h2>Diamond Login</h2>
            <input type="email" id="log-email" placeholder="Ø¦ÛŒÙ…Û•ÛŒÚµ">
            <input type="password" id="log-pass" placeholder="Ù¾Ø§Ø³Û†Ø±Ø¯">
            <button type="button" onclick="validateLogin()" class="btn-diamond">Ú†ÙˆÙˆÙ†Û•Ú˜Û†Ø±</button>
            
            <button type="button" onclick="handleForgotPassword()" class="btn-link" style="color: #888; text-decoration: none; font-size: 12px; margin-top: 5px;">Ù¾Ø§Ø³Û†Ø±Ø¯Øª Ú˜Ø¨ÛŒØ± Ú©Ø±ÛŒÛŒÛ•ØŸ</button>
            
            <p>Ø¦Û•Ú©Ø§ÙˆÙ†Øª Ù†ÛŒÙ†Û•ØŸ <button type="button" onclick="toggleForms('signup-form')" class="btn-link">Ø¯Ø±ÙˆØ³Øª Ø¨Ú©Û•</button></p>
        </div>

        <div id="signup-form" class="auth-card hidden">
            <div style="font-size: 50px;">ğŸš€</div>
            <h2>Create Account</h2>
            <input type="text" id="sign-name" placeholder="Ù†Ø§Ú¤Û ØªÛ•Ù…Ø§Ù…">
            <input type="email" id="sign-email" placeholder="Ø¦ÛŒÙ…Û•ÛŒÚµ">
            <input type="password" id="sign-pass" placeholder="Ù¾Ø§Ø³Û†Ø±Ø¯">
            <button type="button" onclick="handleSignUp()" class="btn-diamond">ØªÛ†Ù…Ø§Ø±Ú©Ø±Ø¯Ù†</button>
            <p>Ø¦Û•Ú©Ø§ÙˆÙ†Øª Ù‡Û•ÛŒÙ†ØŸ <button type="button" onclick="toggleForms('login-form')" class="btn-link">Ø¨Ú†Û† Ú˜Û†Ø±</button></p>
        </div>
    </div>

    <script>
        /* --- Ù¢. Ú©Û†Ø¯Û JavaScript Ù„ Ú¤ÛØ±Û• Ø¬ÛÚ¯ÛŒØ± Ú©Ø± --- */
        const supabaseUrl = 'https://cepuvipasminpjcpgvrq.supabase.co';
        const supabaseKey = 'EyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNlcHV2aXBhc21pbnBqY3BndnJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4ODM1NDQsImV4cCI6MjA4MTQ1OTU0NH0.FcLh2LgcxHhdtZdqCIu3ImN7T_Xp8a8hXGCZHRhcWuE';
        const supabase = supabase.createClient(supabaseUrl, supabaseKey);

        // ÙØ±Ù…Ø§Ù† Ø¨Û† Ú¯Û†Ú•ÛŒÙ†Ø§ ÙÛ†Ø±Ù…Ø§Ù†
        function toggleForms(formId) {
            const login = document.getElementById('login-form');
            const signup = document.getElementById('signup-form');
            if (formId === 'signup-form') {
                login.classList.add('hidden');
                signup.classList.remove('hidden');
            } else {
                signup.classList.add('hidden');
                login.classList.remove('hidden');
            }
        }

        // ÙØ±Ù…Ø§Ù† Ø¨Û† Ù¾Ø§Ø³Û†Ø±Ø¯Û Ú˜Ø¨ÛŒØ±Ú©Ø±ÛŒ
        async function handleForgotPassword() {
            const email = document.getElementById('log-email').value;
            if (!email) { alert("Ø¦ÛŒÙ…Û•ÛŒÚµÛ Ø®Û† Ø¨Ù†Ú¤ÛØ³Û•!"); return; }
            const { error } = await supabase.auth.resetPasswordForEmail(email);
            if (error) alert(error.message); else alert("Ù„ÛŒÙ†Ú© Ø¨Û† Ø¦ÛŒÙ…Û•ÛŒÚµØ§ ØªÛ• Ù‡Ø§Øª!");
        }

        // ØªÛ†Ù…Ø§Ø±Ú©Ø±Ø¯Ù†
        async function handleSignUp() {
            const email = document.getElementById('sign-email').value;
            const pass = document.getElementById('sign-pass').value;
            const name = document.getElementById('sign-name').value;
            const { data, error } = await supabase.auth.signUp({ email, password: pass });
            if (error) alert(error.message); 
            else { 
                await supabase.from('users').insert([{ full_name: name, email: email }]);
                alert("Ø³Û•Ø±Ú©Û•ÙØªÛŒ Ø¨ÙˆÙˆ!"); 
                window.location.href="dashboard.html"; 
            }
        }

        // Ú†ÙˆÙˆÙ†Û•Ú˜Û†Ø±
        async function validateLogin() {
            const email = document.getElementById('log-email').value;
            const pass = document.getElementById('log-pass').value;
            const { error } = await supabase.auth.signInWithPassword({ email, password: pass });
            if (error) alert("Ø¦ÛŒÙ…Û•ÛŒÚµ ÛŒØ§Ù† Ù¾Ø§Ø³Û†Ø±Ø¯ Ø´Ø§Ø´Û•!"); 
            else window.location.href="dashboard.html";
        }
    </script>
</body>
</html>
