<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARJAN AI | Diamond System</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root { --gold: #D4AF37; --white: #ffffff; }
        body { background-color: #f4f4f4; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; font-family: sans-serif; }
        .auth-card { background: var(--white); padding: 40px 30px; border-radius: 30px; border: 2px solid var(--gold); text-align: center; width: 350px; box-shadow: 0 15px 40px rgba(0,0,0,0.15); display: flex; flex-direction: column; gap: 15px; }
        .hidden { display: none !important; }
        input { width: 100%; padding: 15px; border-radius: 12px; border: 1px solid #ddd; outline: none; box-sizing: border-box; text-align: center; }
        .btn-diamond { width: 100%; padding: 15px; background: linear-gradient(45deg, #000, var(--gold), #000); color: #fff; border: 2px solid var(--gold); border-radius: 15px; font-weight: bold; cursor: pointer; }
        
        /* Ø¦Û•Ú¤Û• Ø¦Û•Ùˆ Ù¾Ø´Ú©Û•ÛŒÛ• ÛŒØ§ ØªÛ• Ø¯Ú¤ÛØª ÙˆÛ•Ú© Ù†Ú¤ÛØ³ÛŒÙ† Ø¨ÛŒØª Ø¨Û•Ø³ Ú©Ø§Ø± Ø¨Ú©Û•Øª */
        .clickable-text {
            color: var(--gold);
            cursor: pointer;
            font-weight: bold;
            text-decoration: underline;
            display: inline-block;
            padding: 5px 10px;
            user-select: none;
            -webkit-tap-highlight-color: transparent; /* Ø¨Û† Ù…ÙˆØ¨Ø§ÛŒÙ„Û */
        }
    </style>
</head>
<body>

    <div class="auth-container">
        <div id="login-form" class="auth-card">
            <div style="font-size: 50px;">ğŸ’</div>
            <h2>Diamond Login</h2>
            <input type="email" id="log-email" placeholder="Ø¦ÛŒÙ…Û•ÛŒÚµ">
            <input type="password" id="log-pass" placeholder="Ù¾Ø§Ø³Û†Ø±Ø¯">
            <button type="button" onclick="validateLogin()" class="btn-diamond">Ú†ÙˆÙˆÙ†Û•Ú˜Û†Ø±</button>
            
            <div onclick="handleForgotPassword()" class="clickable-text" style="color: #888; font-size: 12px; text-decoration: none;">Ù¾Ø§Ø³Û†Ø±Ø¯Øª Ú˜Ø¨ÛŒØ± Ú©Ø±ÛŒÛŒÛ•ØŸ</div>
            
            <p>Ø¦Û•Ú©Ø§ÙˆÙ†Øª Ù†ÛŒÙ†Û•ØŸ <span class="clickable-text" onclick="toggleForms('signup-form')">Ø¯Ø±ÙˆØ³Øª Ø¨Ú©Û•</span></p>
        </div>

        <div id="signup-form" class="auth-card hidden">
            <div style="font-size: 50px;">ğŸš€</div>
            <h2>Create Account</h2>
            <input type="text" id="sign-name" placeholder="Ù†Ø§Ú¤Û ØªÛ•Ù…Ø§Ù…">
            <input type="email" id="sign-email" placeholder="Ø¦ÛŒÙ…Û•ÛŒÚµ">
            <input type="password" id="sign-pass" placeholder="Ù¾Ø§Ø³Û†Ø±Ø¯">
            <button type="button" onclick="handleSignUp()" class="btn-diamond">ØªÛ†Ù…Ø§Ø±Ú©Ø±Ø¯Ù†</button>
            <p>Ø¦Û•Ú©Ø§ÙˆÙ†Øª Ù‡Û•ÛŒÙ†ØŸ <span class="clickable-text" onclick="toggleForms('login-form')">Ø¨Ú†Û† Ú˜Û†Ø±</span></p>
        </div>
    </div>

    <script>
        const supabaseUrl = 'https://cepuvipasminpjcpgvrq.supabase.co';
        const supabaseKey = 'EyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNlcHV2aXBhc21pbnBqY3BndnJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4ODM1NDQsImV4cCI6MjA4MTQ1OTU0NH0.FcLh2LgcxHhdtZdqCIu3ImN7T_Xp8a8hXGCZHRhcWuE';
        const supabase = supabase.createClient(supabaseUrl, supabaseKey);

        function toggleForms(formId) {
            const login = document.getElementById('login-form');
            const signup = document.getElementById('signup-form');
            if (formId === 'signup-form') {
                login.style.display = 'none';
                signup.style.display = 'flex';
                signup.classList.remove('hidden');
            } else {
                signup.style.display = 'none';
                login.style.display = 'flex';
                login.classList.remove('hidden');
            }
        }

        async function handleSignUp() {
            const email = document.getElementById('sign-email').value;
            const pass = document.getElementById('sign-pass').value;
            const { error } = await supabase.auth.signUp({ email, password: pass });
            if (error) alert(error.message); else { alert("Ø³Û•Ø±Ú©Û•ÙØªÛŒ Ø¨ÙˆÙˆ!"); window.location.href="dashboard.html"; }
        }

        async function validateLogin() {
            const email = document.getElementById('log-email').value;
            const pass = document.getElementById('log-pass').value;
            const { error } = await supabase.auth.signInWithPassword({ email, password: pass });
            if (error) alert("Ø´Ø§Ø´Û•!"); else window.location.href="dashboard.html";
        }

        async function handleForgotPassword() {
            const email = document.getElementById('log-email').value;
            if (!email) { alert("Ø¦ÛŒÙ…ÛÚµ Ø¨Ù†Ú¤ÛØ³Û•!"); return; }
            await supabase.auth.resetPasswordForEmail(email);
            alert("Ù„ÛŒÙ†Ú© Ù‡Ø§Øª!");
        }
    </script>
</body>
</html>
